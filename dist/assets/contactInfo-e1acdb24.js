import{r as d,j as e,S as q,c as n,b as z}from"./index-9b76c308.js";import{c as P,a as r}from"./index.esm-a4b031d1.js";import{y as R,b as $,z as M,A as W}from"./userApis-9bfd51bc.js";import{u as D}from"./useDispatch-3a701ae1.js";import"./userInterceptor-9200eaeb.js";import"./envConfig-92d5628e.js";const T=()=>{const[l,j]=d.useState(!1),[s,N]=d.useState(!1),[y,u]=d.useState(!1),[C,I]=d.useState(!1),[a,S]=d.useState(),[t,m]=d.useState({firstName:(a==null?void 0:a.firstName)||"",lastName:(a==null?void 0:a.lastName)||"",phoneNumber:(a==null?void 0:a.phoneNumber)||"",website:(a==null?void 0:a.website)||"",images:[],profileImage:a==null?void 0:a.profileImage}),[o,h]=d.useState(void 0),[w,v]=d.useState(!1),k=D(),F=async()=>{const x=await $();if(x){const i=x.data.data;S(i);const c={firstName:i.firstName,lastName:i.lastName,phoneNumber:i.phoneNumber,website:i.website,profileImage:i==null?void 0:i.profileImage,images:[]};m(c),i&&k(z(i)),I(!0)}};d.useEffect(()=>{F(),u(!1)},[s]);const E=P().shape({firstName:r().max(10).min(3).required("First name is required"),lastName:r().max(10).min(3).required("Last name is required"),phoneNumber:r().max(10).min(10).required("Phone number is required"),website:r().url("Invalid website URL")}),[f,A]=d.useState({}),b=x=>{const{name:i,value:c}=x.target;m(p=>({...p,[i]:c}))},U=x=>{var c;const i=(c=x.target.files)==null?void 0:c[0];h(i)},B=x=>{x.preventDefault(),E.validate(t,{abortEarly:!1}).then(async()=>{const i=new FormData;i.append("firstName",t.firstName),i.append("lastName",t.lastName),i.append("phoneNumber",t.phoneNumber),i.append("website",t.website),o&&[o].forEach((g,L)=>{i.append("images",g,`images${L}`)}),v(!0);const c=await M(i);A({}),c!=null&&c.data.ok&&(console.log(c.data),N(!s),v(!1))}).catch(i=>{const c=i.inner.reduce((p,{path:g,message:L})=>(g&&(p[g]=L),p),{});A(c)})};return e.jsx("div",{className:"px-5 md:px-10 lg:px-40 mt-5",children:w?e.jsx(q,{}):e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"font-semibold text-sm md:text-lg lg:text-xl",children:"Account Information"}),C&&e.jsxs("form",{onSubmit:B,children:[e.jsxs("div",{className:"flex flex-wrap",children:[e.jsxs("div",{className:"flex flex-col w-full md:w-1/2 md:px-3",children:[e.jsx("h5",{className:"mt-5 mb-5",children:"Profile Photo"}),y?e.jsx(e.Fragment,{children:o?e.jsx("div",{className:"w-56 h-56 flex flex-col items-center  ",children:e.jsxs("div",{className:"flex flex-col items-center w-40-h-40 rounded-full overflow-hidden",children:[e.jsx("img",{className:"rounded-full h-56  object-cover",src:URL.createObjectURL(o),alt:"image description"}),e.jsx(n.Button,{size:"sm",variant:"gradient",className:" w-48  -mt-16",color:"blue-gray",onClick:()=>u(!0),children:"Change profile picture"})]})}):e.jsx("div",{className:"flex items-center justify-center w-56 h-56",children:e.jsxs("label",{htmlFor:"profilePicture",className:"flex flex-col items-center justify-center w-full h-full border-2 border-gray-300 border-dashed rounded-lg cursor-pointer bg-gray-50 dark:hover:bg-bray-800 dark:bg-gray-700 hover:bg-gray-100 dark:border-gray-600 dark:hover:border-gray-500 dark:hover:bg-gray-600",children:[e.jsxs("div",{className:"flex flex-col items-center justify-center ",children:[e.jsx("svg",{className:"w-8 h-8 mb-4 text-gray-500 dark:text-gray-400","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 20 16",children:e.jsx("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 13h3a3 3 0 0 0 0-6h-.025A5.56 5.56 0 0 0 16 6.5 5.5 5.5 0 0 0 5.207 5.021C5.137 5.017 5.071 5 5 5a4 4 0 0 0 0 8h2.167M10 15V6m0 0L8 8m2-2 2 2"})}),e.jsxs("p",{className:"mb-2 text-sm text-gray-500 dark:text-gray-400",children:[e.jsx("span",{className:"font-semibold",children:"Click to upload"})," ","or drag and drop"]})]}),e.jsx("input",{type:"file",id:"profilePicture",name:"profilePicture",onChange:U,className:"hidden"})]})})}):e.jsx("div",{className:"w-56 h-56 flex flex-col items-center  ",children:e.jsxs("div",{className:"flex flex-col items-center w-40-h-40 rounded-full overflow-hidden",children:[e.jsx("img",{className:"rounded-full h-56  object-cover",src:t.profileImage,alt:"image description"}),e.jsx(n.Button,{size:"sm",variant:"gradient",className:" w-48  -mt-16",color:"blue-gray",onClick:()=>u(!0),children:"Change profile picture"})]})})]}),e.jsxs("div",{className:"flex flex-col w-full md:w-1/2 md:px-3",children:[e.jsx("h5",{className:"mt-5 mb-5",children:"Contact Information"}),e.jsxs("div",{className:"flex mb-4",children:[e.jsxs("div",{className:"w-1/2 pr-3",children:[e.jsx(n.Input,{type:"text",name:"firstName",value:t==null?void 0:t.firstName,onChange:b,label:"First name"}),f.firstName&&e.jsx("div",{className:"error text-red-600",children:f.firstName})]}),e.jsxs("div",{className:"w-1/2 pl-3",children:[e.jsx(n.Input,{type:"text",name:"lastName",value:t.lastName,onChange:b,label:"Last name"}),e.jsx("div",{className:"error text-red-600",children:f.lastName})]})]}),e.jsxs("div",{className:"flex",children:[e.jsxs("div",{className:"w-1/2 pr-3",children:[e.jsx(n.Input,{type:"number",name:"phoneNumber",value:t.phoneNumber,onChange:b,label:"Phone number"}),e.jsx("div",{className:"error text-red-600",children:f.phoneNumber})]}),e.jsxs("div",{className:"w-1/2 pl-3",children:[e.jsx(n.Input,{type:"text",name:"website",value:t.website,onChange:b,label:"Website link"}),e.jsx("div",{className:"error text-red-600",children:f.website})]})]})]})]}),e.jsxs("div",{className:"flex justify-between md:pr-3 mt-3",children:[e.jsx(n.Button,{className:"md:ml-3",size:"sm",onClick:()=>j(!l),children:"Add address"}),e.jsx(n.Button,{type:"submit",color:"red",size:"sm",className:"h-8 w-24",children:"Save"})]})]}),l&&e.jsx(H,{})]})})},H=()=>{const[l,j]=d.useState({addressLine1:"",addressLine2:"",city:"",country:"",pin:"",state:"",wAddressLine1:"",wAddressLine2:"",wCity:"",wCountry:"",wPin:"",wState:""}),[s,N]=d.useState({}),[y,u]=d.useState(!1);d.useEffect(()=>{C()},[]);const C=async()=>{const t=await R();if(t!=null&&t.data.ok){const m=t==null?void 0:t.data.data;j(m)}},I=P().shape({addressLine1:r().required("Address line 1 is required"),addressLine2:r(),city:r().required("City is required"),country:r().required("Country is required"),pin:r().required("Pin is required"),state:r().required("State is required"),wAddressLine1:r().required("Address line 1 is required"),wAddressLine2:r(),wCity:r().required("City is required"),wCountry:r().required("Country is required"),wPin:r().required("Pin is required"),wState:r().required("State is required")}),a=t=>{const{name:m,value:o}=t.target;j(h=>({...h,[m]:o}))},S=t=>{t.preventDefault(),u(!0),I.validate(l,{abortEarly:!1}).then(async()=>{N({}),await W(l)&&u(!1)}).catch(m=>{const o=m.inner.reduce((h,{path:w,message:v})=>(w&&(h[w]=v),h),{});N(o)})};return e.jsx(e.Fragment,{children:y?e.jsx(q,{}):e.jsxs("form",{onSubmit:S,children:[e.jsxs("div",{className:"flex flex-wrap",children:[e.jsxs("div",{className:"flex flex-col w-full md:w-1/2 md:mt-3 md:px-3",children:[e.jsx("h5",{className:"mt-5 mb-5",children:"Home Address"}),e.jsxs("div",{className:"w-full mb-3",children:[e.jsx(n.Input,{type:"text",name:"addressLine1",value:l.addressLine1,onChange:a,label:"Address line 1"}),(s==null?void 0:s.addressLine1)&&e.jsx("div",{className:"error text-red-600",children:s==null?void 0:s.addressLine1})]}),e.jsx("div",{className:"w-full mb-3",children:e.jsx(n.Input,{type:"text",name:"addressLine2",value:l.addressLine2,onChange:a,label:"Address line 2"})}),e.jsxs("div",{className:"flex mb-4",children:[e.jsxs("div",{className:"w-1/2 pr-3",children:[e.jsx(n.Input,{type:"text",name:"city",value:l.city,onChange:a,label:"City"}),(s==null?void 0:s.city)&&e.jsx("div",{className:"error text-red-600",children:s==null?void 0:s.city})]}),e.jsxs("div",{className:"w-1/2 pl-3",children:[e.jsx(n.Input,{type:"text",name:"country",value:l.country,onChange:a,label:"Country"}),(s==null?void 0:s.country)&&e.jsx("div",{className:"error text-red-600",children:s==null?void 0:s.country})]})]}),e.jsxs("div",{className:"flex mb-4",children:[e.jsxs("div",{className:"w-1/2 pr-3",children:[e.jsx(n.Input,{type:"text",name:"pin",value:l.pin,onChange:a,label:"Pin"}),(s==null?void 0:s.pin)&&e.jsx("div",{className:"error text-red-600",children:s==null?void 0:s.pin})]}),e.jsxs("div",{className:"w-1/2 pl-3",children:[e.jsx(n.Input,{type:"text",name:"state",value:l.state,onChange:a,label:"State"}),(s==null?void 0:s.state)&&e.jsx("div",{className:"error text-red-600",children:s==null?void 0:s.state})]})]})]}),e.jsxs("div",{className:"flex flex-col w-full md:w-1/2 md:mt-3 md:px-3",children:[e.jsx("h5",{className:"mt-5 mb-5",children:"Work Address"}),e.jsxs("div",{className:"w-full mb-3",children:[e.jsx(n.Input,{type:"text",name:"wAddressLine1",value:l.wAddressLine1,onChange:a,label:"Address line 1"}),(s==null?void 0:s.wAddressLine1)&&e.jsx("div",{className:"error text-red-600",children:s==null?void 0:s.wAddressLine1})]}),e.jsx("div",{className:"w-full mb-3",children:e.jsx(n.Input,{type:"text",name:"wAddressLine2",value:l.wAddressLine2,onChange:a,label:"Address line 2"})}),e.jsxs("div",{className:"flex mb-4",children:[e.jsxs("div",{className:"w-1/2 pr-3",children:[e.jsx(n.Input,{type:"text",name:"wCity",value:l.wCity,onChange:a,label:"City"}),e.jsx("div",{className:"error text-red-600",children:s==null?void 0:s.wCity})]}),e.jsxs("div",{className:"w-1/2 pl-3",children:[e.jsx(n.Input,{name:"wCountry",value:l.wCountry,onChange:a,label:"Country"}),e.jsx("div",{className:"error text-red-600",children:s==null?void 0:s.wCountry})]})]}),e.jsxs("div",{className:"flex mb-4",children:[e.jsxs("div",{className:"w-1/2 pr-3",children:[e.jsx(n.Input,{name:"wPin",value:l.wPin,onChange:a,label:"Pin"}),e.jsx("div",{className:"error text-red-600",children:s==null?void 0:s.wPin})]}),e.jsxs("div",{className:"w-1/2 pl-3",children:[e.jsx(n.Input,{name:"wState",value:l.wState,onChange:a,label:"State"}),e.jsx("div",{className:"error text-red-600",children:s==null?void 0:s.wState})]})]})]})]}),e.jsx("div",{className:"flex justify-end md:pr-3 mt-3 ",children:e.jsx(n.Button,{type:"submit",color:"red",size:"sm",className:"h-8 w-full md:w-24",children:"Save"})})]})})};export{T as default};

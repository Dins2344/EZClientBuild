import{r as m,j as e,S as B,c as n,b as z}from"./index-22a109d5.js";import{c as q,a as d}from"./index.esm-5099a773.js";import{y as $,h as M,z as R,A as W}from"./userApis-7fd80f2c.js";import{u as D}from"./useDispatch-2a3118d0.js";import"./userInterceptor-9200eaeb.js";import"./envConfig-92d5628e.js";const T=()=>{const[i,j]=m.useState(!1),[s,N]=m.useState(!1),[g,w]=m.useState(!1),[r,y]=m.useState(!1),[a,x]=m.useState(),[l,u]=m.useState({firstName:(a==null?void 0:a.firstName)||"",lastName:(a==null?void 0:a.lastName)||"",phoneNumber:(a==null?void 0:a.phoneNumber)||"",website:(a==null?void 0:a.website)||"",images:[],profileImage:a==null?void 0:a.profileImage}),[h,C]=m.useState(void 0),[L,S]=m.useState(!1),P=D(),k=async()=>{const o=await M();if(o){const t=o.data.data;x(t);const c={firstName:t.firstName,lastName:t.lastName,phoneNumber:t.phoneNumber,website:t.website,profileImage:t==null?void 0:t.profileImage,images:[]};u(c),t&&P(z(t)),y(!0)}};m.useEffect(()=>{k(),w(!1)},[s]);const E=q().shape({firstName:d().required("First name is required"),lastName:d().required("Last name is required"),phoneNumber:d().required("Phone number is required"),website:d().url("Invalid website URL")}),[p,A]=m.useState({}),v=o=>{const{name:t,value:c}=o.target;u(f=>({...f,[t]:c}))},F=o=>{var c;const t=(c=o.target.files)==null?void 0:c[0];C(t)},U=o=>{o.preventDefault(),E.validate(l,{abortEarly:!1}).then(async()=>{const t=new FormData;t.append("firstName",l.firstName),t.append("lastName",l.lastName),t.append("phoneNumber",l.phoneNumber),t.append("website",l.website),h&&[h].forEach((b,I)=>{t.append("images",b,`images${I}`)}),S(!0);const c=await R(t);A({}),c!=null&&c.data.ok&&(console.log(c.data),N(!s),S(!1))}).catch(t=>{const c=t.inner.reduce((f,{path:b,message:I})=>(b&&(f[b]=I),f),{});A(c)})};return e.jsx("div",{className:"px-5 md:px-10 lg:px-40 mt-5",children:L?e.jsx(B,{}):e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"font-semibold text-sm md:text-lg lg:text-xl",children:"Account Information"}),r&&e.jsxs("form",{onSubmit:U,children:[e.jsxs("div",{className:"flex flex-wrap",children:[e.jsxs("div",{className:"flex flex-col w-full md:w-1/2 md:px-3",children:[e.jsx("h5",{className:"mt-5 mb-5",children:"Profile Photo"}),g?e.jsx("div",{className:"flex items-center justify-center w-56 h-56",children:e.jsxs("label",{htmlFor:"profilePicture",className:"flex flex-col items-center justify-center w-full h-full border-2 border-gray-300 border-dashed rounded-lg cursor-pointer bg-gray-50 dark:hover:bg-bray-800 dark:bg-gray-700 hover:bg-gray-100 dark:border-gray-600 dark:hover:border-gray-500 dark:hover:bg-gray-600",children:[e.jsxs("div",{className:"flex flex-col items-center justify-center ",children:[e.jsx("svg",{className:"w-8 h-8 mb-4 text-gray-500 dark:text-gray-400","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 20 16",children:e.jsx("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 13h3a3 3 0 0 0 0-6h-.025A5.56 5.56 0 0 0 16 6.5 5.5 5.5 0 0 0 5.207 5.021C5.137 5.017 5.071 5 5 5a4 4 0 0 0 0 8h2.167M10 15V6m0 0L8 8m2-2 2 2"})}),e.jsxs("p",{className:"mb-2 text-sm text-gray-500 dark:text-gray-400",children:[e.jsx("span",{className:"font-semibold",children:"Click to upload"})," ","or drag and drop"]})]}),e.jsx("input",{type:"file",id:"profilePicture",name:"profilePicture",onChange:F,className:"hidden"})]})}):e.jsx("div",{className:"w-56 h-56 flex flex-col items-center  ",children:e.jsxs("div",{className:"flex flex-col items-center w-40-h-40 rounded-full overflow-hidden",children:[e.jsx("img",{className:"rounded-full h-56  object-cover",src:l.profileImage,alt:"image description"}),e.jsx(n.Button,{size:"sm",variant:"gradient",className:" w-48  -mt-16",color:"blue-gray",onClick:()=>w(!0),children:"Change profile picture"})]})})]}),e.jsxs("div",{className:"flex flex-col w-full md:w-1/2 md:px-3",children:[e.jsx("h5",{className:"mt-5 mb-5",children:"Contact Information"}),e.jsxs("div",{className:"flex mb-4",children:[e.jsxs("div",{className:"w-1/2 pr-3",children:[e.jsx(n.Input,{type:"text",name:"firstName",value:l==null?void 0:l.firstName,onChange:v,label:"First name"}),p.firstName&&e.jsx("div",{className:"error text-red-600",children:p.firstName})]}),e.jsxs("div",{className:"w-1/2 pl-3",children:[e.jsx(n.Input,{type:"text",name:"lastName",value:l.lastName,onChange:v,label:"Last name"}),e.jsx("div",{className:"error text-red-600",children:p.lastName})]})]}),e.jsxs("div",{className:"flex",children:[e.jsxs("div",{className:"w-1/2 pr-3",children:[e.jsx(n.Input,{type:"number",name:"phoneNumber",value:l.phoneNumber,onChange:v,label:"Phone number"}),e.jsx("div",{className:"error text-red-600",children:p.phoneNumber})]}),e.jsxs("div",{className:"w-1/2 pl-3",children:[e.jsx(n.Input,{type:"text",name:"website",value:l.website,onChange:v,label:"Website link"}),e.jsx("div",{className:"error text-red-600",children:p.website})]})]})]})]}),e.jsxs("div",{className:"flex justify-between md:pr-3 mt-3",children:[e.jsx(n.Button,{className:"md:ml-3",size:"sm",onClick:()=>j(!i),children:"Add address"}),e.jsx(n.Button,{type:"submit",color:"red",size:"sm",className:"h-8 w-24",children:"Save"})]})]}),i&&e.jsx(H,{})]})})},H=()=>{const[i,j]=m.useState({addressLine1:"",addressLine2:"",city:"",country:"",pin:"",state:"",wAddressLine1:"",wAddressLine2:"",wCity:"",wCountry:"",wPin:"",wState:""}),[s,N]=m.useState({});m.useEffect(()=>{g()},[]);const g=async()=>{const a=await $();console.log(a);const x=a==null?void 0:a.data.data;j(x)},w=q().shape({addressLine1:d().required("Address line 1 is required"),addressLine2:d(),city:d().required("City is required"),country:d().required("Country is required"),pin:d().required("Pin is required"),state:d().required("State is required"),wAddressLine1:d().required("Address line 1 is required"),wAddressLine2:d(),wCity:d().required("City is required"),wCountry:d().required("Country is required"),wPin:d().required("Pin is required"),wState:d().required("State is required")}),r=a=>{const{name:x,value:l}=a.target;j(u=>({...u,[x]:l}))},y=a=>{a.preventDefault(),w.validate(i,{abortEarly:!1}).then(async()=>{N({}),await W(i)}).catch(x=>{const l=x.inner.reduce((u,{path:h,message:C})=>(h&&(u[h]=C),u),{});N(l)})};return e.jsx(e.Fragment,{children:e.jsxs("form",{onSubmit:y,children:[e.jsxs("div",{className:"flex flex-wrap",children:[e.jsxs("div",{className:"flex flex-col w-full md:w-1/2 md:mt-3 md:px-3",children:[e.jsx("h5",{className:"mt-5 mb-5",children:"Home Address"}),e.jsxs("div",{className:"w-full mb-3",children:[e.jsx(n.Input,{type:"text",name:"addressLine1",value:i.addressLine1,onChange:r,label:"Address line 1"}),(s==null?void 0:s.addressLine1)&&e.jsx("div",{className:"error text-red-600",children:s==null?void 0:s.addressLine1})]}),e.jsx("div",{className:"w-full mb-3",children:e.jsx(n.Input,{type:"text",name:"addressLine2",value:i.addressLine2,onChange:r,label:"Address line 2"})}),e.jsxs("div",{className:"flex mb-4",children:[e.jsxs("div",{className:"w-1/2 pr-3",children:[e.jsx(n.Input,{type:"text",name:"city",value:i.city,onChange:r,label:"City"}),(s==null?void 0:s.city)&&e.jsx("div",{className:"error text-red-600",children:s==null?void 0:s.city})]}),e.jsxs("div",{className:"w-1/2 pl-3",children:[e.jsx(n.Input,{type:"text",name:"country",value:i.country,onChange:r,label:"Country"}),(s==null?void 0:s.country)&&e.jsx("div",{className:"error text-red-600",children:s==null?void 0:s.country})]})]}),e.jsxs("div",{className:"flex mb-4",children:[e.jsxs("div",{className:"w-1/2 pr-3",children:[e.jsx(n.Input,{type:"text",name:"pin",value:i.pin,onChange:r,label:"Pin"}),(s==null?void 0:s.pin)&&e.jsx("div",{className:"error text-red-600",children:s==null?void 0:s.pin})]}),e.jsxs("div",{className:"w-1/2 pl-3",children:[e.jsx(n.Input,{type:"text",name:"state",value:i.state,onChange:r,label:"State"}),(s==null?void 0:s.state)&&e.jsx("div",{className:"error text-red-600",children:s==null?void 0:s.state})]})]})]}),e.jsxs("div",{className:"flex flex-col w-full md:w-1/2 md:mt-3 md:px-3",children:[e.jsx("h5",{className:"mt-5 mb-5",children:"Work Address"}),e.jsxs("div",{className:"w-full mb-3",children:[e.jsx(n.Input,{type:"text",name:"wAddressLine1",value:i.wAddressLine1,onChange:r,label:"Address line 1"}),(s==null?void 0:s.wAddressLine1)&&e.jsx("div",{className:"error text-red-600",children:s==null?void 0:s.wAddressLine1})]}),e.jsx("div",{className:"w-full mb-3",children:e.jsx(n.Input,{type:"text",name:"wAddressLine2",value:i.wAddressLine2,onChange:r,label:"Address line 2"})}),e.jsxs("div",{className:"flex mb-4",children:[e.jsxs("div",{className:"w-1/2 pr-3",children:[e.jsx(n.Input,{type:"text",name:"wCity",value:i.wCity,onChange:r,label:"City"}),e.jsx("div",{className:"error text-red-600",children:s==null?void 0:s.wCity})]}),e.jsxs("div",{className:"w-1/2 pl-3",children:[e.jsx(n.Input,{name:"wCountry",value:i.wCountry,onChange:r,label:"Country"}),e.jsx("div",{className:"error text-red-600",children:s==null?void 0:s.wCountry})]})]}),e.jsxs("div",{className:"flex mb-4",children:[e.jsxs("div",{className:"w-1/2 pr-3",children:[e.jsx(n.Input,{name:"wPin",value:i.wPin,onChange:r,label:"Pin"}),e.jsx("div",{className:"error text-red-600",children:s==null?void 0:s.wPin})]}),e.jsxs("div",{className:"w-1/2 pl-3",children:[e.jsx(n.Input,{name:"wState",value:i.wState,onChange:r,label:"State"}),e.jsx("div",{className:"error text-red-600",children:s==null?void 0:s.wState})]})]})]})]}),e.jsx("div",{className:"flex justify-end md:pr-3 mt-3 ",children:e.jsx(n.Button,{type:"submit",color:"red",size:"sm",className:"h-8 w-full md:w-24",children:"Save"})})]})})};export{T as default};

import{r as o,j as e,c as s,C as u}from"./index-aa30c290.js";import{t as b,v as N,w as v,x as w,i as T,h as k,y as S,z as M,A}from"./admin-405496b7.js";import{_ as j}from"./react-apexcharts.min-6c955123.js";import"./envConfig-2c904499.js";const E=()=>{const[c,d]=o.useState();o.useEffect(()=>{i()},[]);const i=async()=>{const t=await b();d(t==null?void 0:t.data.data)},l=c,m=["User info","Contact info","Event info","Organization","Ticket info"];return e.jsxs(s.Card,{className:"h-full w-full",children:[e.jsx(s.CardHeader,{floated:!1,shadow:!1,className:"rounded-none",children:e.jsx("div",{className:"mb-4 flex items-center justify-between gap-8",children:e.jsxs("div",{children:[e.jsx(s.Typography,{variant:"h5",color:"blue-gray",children:"Bookings"}),e.jsx(s.Typography,{color:"gray",className:"mt-1 font-normal",children:"See information about all bookings of your events"})]})})}),e.jsx(s.CardBody,{className:"overflow-scroll px-0",children:e.jsxs("table",{className:"mt-2 w-full min-w-max table-auto text-left",children:[e.jsx("thead",{children:e.jsx("tr",{children:m.map((t,a)=>e.jsx("th",{className:"cursor-pointer border-y border-blue-gray-100 bg-blue-gray-50/50 p-4 transition-colors hover:bg-blue-gray-50",children:e.jsxs(s.Typography,{variant:"small",color:"blue-gray",className:"flex items-center justify-between gap-2 font-normal leading-none opacity-70",children:[t," ",a!==m.length-1&&e.jsx(u,{strokeWidth:2,className:"h-4 w-4"})]})},t))})}),e.jsx("tbody",{children:l&&l.map(({user:t,event:a,bookingTime:r,contactInfo:n,ticketCount:h,totalAmount:x,_id:p},y)=>{const g=y===l.length-1?"p-4":"p-4 border-b border-blue-gray-50";return e.jsxs("tr",{children:[e.jsx("td",{className:g,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(s.Avatar,{src:t.profileImage,alt:"https://img.freepik.com/free-icon/user_318-159711.jpg",size:"sm"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsxs(s.Typography,{variant:"small",color:"blue-gray",className:"font-normal",children:[t.firstName," ",t.lastName]}),e.jsx(s.Typography,{variant:"small",color:"blue-gray",className:"font-normal opacity-70",children:t.email})]})]})}),e.jsx("td",{className:g,children:e.jsxs("div",{className:"flex flex-col",children:[e.jsxs(s.Typography,{variant:"small",color:"blue-gray",className:"font-normal",children:[n.firstName," ",n.lastName]}),e.jsx(s.Typography,{variant:"small",color:"blue-gray",className:"font-normal opacity-70",children:n.email}),e.jsx(s.Typography,{variant:"small",color:"blue-gray",className:"font-normal opacity-70",children:n.phoneNumber})]})}),e.jsx("td",{className:g,children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx(s.Typography,{variant:"small",color:"blue-gray",className:"font-normal",children:a.eventName}),e.jsxs(s.Typography,{variant:"small",color:"blue-gray",className:"font-normal opacity-70",children:["category: ",a.category]}),e.jsxs(s.Typography,{variant:"small",color:"blue-gray",className:"font-normal opacity-70",children:["starts on:",a.startDate," ",a.startTime]})]})}),e.jsx("td",{className:g,children:e.jsx("div",{className:"flex flex-col",children:e.jsx(s.Typography,{variant:"small",color:"blue-gray",className:"font-normal",children:a.orgName})})}),e.jsx("td",{className:g,children:e.jsxs("div",{className:"flex flex-col",children:[e.jsxs(s.Typography,{variant:"small",color:"blue-gray",className:"font-normal",children:["Tickets: ",h]}),e.jsxs(s.Typography,{variant:"small",color:"blue-gray",className:"font-normal opacity-70",children:["Booked on: ",r]}),e.jsxs(s.Typography,{variant:"small",color:"blue-gray",className:"font-normal opacity-70",children:["Total paid:",x]})]})})]},p)})})]})}),e.jsxs(s.CardFooter,{className:"flex items-center justify-between border-t border-blue-gray-50 p-4",children:[e.jsx(s.Typography,{variant:"small",color:"blue-gray",className:"font-normal",children:"Page 1 of 10"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(s.Button,{variant:"outlined",color:"blue-gray",size:"sm",children:"Previous"}),e.jsx(s.Button,{variant:"outlined",color:"blue-gray",size:"sm",children:"Next"})]})]})]})},C=()=>{const[c,d]=o.useState();o.useEffect(()=>{i()},[]);const i=async()=>{const r=await N();d(r==null?void 0:r.data.data)},l=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],t=["2023-01","2023-02","2023-03","2023-04","2023-05","2023-06","2023-07","2023-08","2023-09","2023-10","2023-11","2023-12"].map(r=>{const n=c&&c.find(h=>h.month===r);return n?n.totalSales:0}),a={options:{chart:{id:"basic-bar"},xaxis:{categories:l}},series:[{name:"Revenue",data:t}]};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"w-full",children:e.jsx(j,{options:a.options,series:a.series,type:"bar"})})})},B=()=>{const[c,d]=o.useState();o.useEffect(()=>{i()},[]);const i=async()=>{const r=await v();d(r==null?void 0:r.data.data)},l=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],t=["2023-01","2023-02","2023-03","2023-04","2023-05","2023-06","2023-07","2023-08","2023-09","2023-10","2023-11","2023-12"].map(r=>{const n=c&&c.find(h=>h.month===r);return n?n.totalTickets:0}),a={options:{chart:{id:"basic-bar"},xaxis:{categories:l}},series:[{name:"Ticket sold",data:t}]};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"w-full",children:e.jsx(j,{options:a.options,series:a.series,type:"line"})})})},F=()=>{const[c,d]=o.useState();o.useEffect(()=>{i()},[]);const i=async()=>{const a=await w();d(a==null?void 0:a.data.data)},l=["free","charged","donation"],t={series:l.map(a=>{const r=c&&c.find(n=>n.paymentType===a);return r?r.totalTickets:0}),chartOptions:{labels:l}};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"w-full h-auto",children:e.jsx(j,{options:t.chartOptions,series:t.series,type:"pie"})})})},_=()=>{const[c,d]=o.useState(),[i,l]=o.useState(),[m,t]=o.useState(),[a,r]=o.useState();o.useEffect(()=>{n()},[]);const n=async()=>{const x=await T(),p=await k(),y=await S(),f=await M();y&&l(y==null?void 0:y.data.data),p&&t(p.data.data),x&&d(x==null?void 0:x.data.data),f&&r(f==null?void 0:f.data.data)},h=a&&a.reduce((x,p)=>x+p.totalTickets,0);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-wrap mt=4",children:[e.jsx("div",{className:"flex w-full md:w-1/2 lg:w-1/4 h-24  p-2 ",children:e.jsxs("div",{className:"flex w-full bg-blue-gray-300  items-center rounded-lg pl-3",children:[e.jsx("h2",{className:"text-5xl mr-3",children:c==null?void 0:c.length}),e.jsx("h5",{className:"text-xl font-bold text-black",children:"Users"})]})}),e.jsx("div",{className:"flex w-full md:w-1/2 lg:w-1/4 h-24  p-2 ",children:e.jsxs("div",{className:"flex w-full bg-blue-gray-300  items-center rounded-lg pl-3",children:[e.jsx("h2",{className:"text-5xl mr-3",children:m==null?void 0:m.length}),e.jsx("h5",{className:"text-xl font-bold text-black",children:"Organizers"})]})}),e.jsx("div",{className:"flex w-full md:w-1/2 lg:w-1/4 h-24  p-2 ",children:e.jsxs("div",{className:"flex w-full bg-blue-gray-300  items-center rounded-lg pl-3",children:[e.jsx("h2",{className:"text-5xl mr-3",children:i==null?void 0:i.length}),e.jsx("h5",{className:"text-xl font-bold text-black",children:"Events"})]})}),e.jsx("div",{className:"flex w-full md:w-1/2 lg:w-1/4 h-24  p-2 ",children:e.jsxs("div",{className:"flex w-full bg-blue-gray-300  items-center rounded-lg pl-3",children:[e.jsx("h2",{className:"text-5xl mr-3",children:h}),e.jsx("h5",{className:"text-xl font-bold text-black",children:"Tickets sold"})]})})]}),e.jsxs("div",{className:"flex flex-wrap mt-10 border shadow-md px-3 rounded-xl bg-white",children:[e.jsxs("div",{className:"flex flex-col justify-center w-full py-4 mb-3",children:[e.jsx("h2",{className:"text-xl  font-extrabold text-black ",children:"Sales Summary"}),e.jsx("p",{children:"An overview of all ticket sales,"})]}),e.jsxs("div",{className:"flex flex-col w-full md:w-1/2 items-center",children:[e.jsx("p",{children:"Monthly revenue"}),e.jsx(C,{})]}),e.jsxs("div",{className:"flex flex-col w-full md:w-1/2 items-center mt-3 md:mt-0",children:[e.jsx("p",{children:"Tickets sold in a month"}),e.jsx(B,{})]})]}),e.jsxs("div",{className:"flex flex-wrap mt-10 border shadow-md px-3 rounded-xl bg-white",children:[e.jsxs("div",{className:"flex flex-col justify-center w-full py-4 mb-3",children:[e.jsx("h2",{className:"text-xl  font-extrabold text-black ",children:"Sales by Ticket Type"}),e.jsx("p",{children:"An overview of all ticket sales by ticket type"})]}),e.jsxs("div",{className:"flex flex-col w-full md:w-1/2 items-center",children:[e.jsx("p",{className:"mb-2",children:"Ticket types sold"}),e.jsx(F,{})]}),e.jsxs("div",{className:"flex flex-col w-full md:w-1/2 items-center mt-3 md:mt-0",children:[e.jsx("p",{className:"mb-3",children:"Ticket sold by events"}),e.jsx(O,{})]})]}),e.jsx("div",{className:"mt-4",children:e.jsx(E,{})})]})},O=()=>{const[c,d]=o.useState();o.useEffect(()=>{i()},[]);const i=async()=>{const l=await A();d(l==null?void 0:l.data.data)};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"flex flex-col h-96 overflow-y-scroll no-scrollbar px-3 w-full",children:e.jsx("div",{className:"relative overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm text-left text-gray-500 dark:text-gray-400 border",children:[e.jsx("thead",{className:"text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400 sticky top-0",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-6 py-3",children:"#"}),e.jsx("th",{scope:"col",className:"px-6 py-3",children:"Event name"}),e.jsx("th",{scope:"col",className:"px-6 py-3",children:"Tickets sold"})]})}),e.jsx("tbody",{children:c&&c.map((l,m)=>e.jsxs("tr",{className:"bg-white border-b dark:bg-gray-800 dark:border-gray-700",children:[e.jsx("td",{className:"px-6 py-4",children:m+1}),e.jsx("th",{scope:"row",className:"px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white",children:l.eventName}),e.jsx("td",{className:"px-6 py-4",children:l.totalTickets})]},l.eventName))})]})})})})};export{O as MostTicketSold,_ as default};

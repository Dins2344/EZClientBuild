import{r as s,j as e,c as n,_ as N,u as C}from"./index-115ee365.js";import{v as j,e as k,f as S}from"./userApis-d8269ce8.js";import{O,a as E}from"./signUp-ef101b30.js";import{k as T,Q as I}from"./ReactToastify-004524da.js";import"./userInterceptor-ef0a808e.js";import"./envConfig-2c904499.js";const V=()=>{const[a,i]=s.useState(""),[d,c]=s.useState(!1),[o,m]=s.useState(""),[r,f]=s.useState(!1),[h,x]=s.useState(""),[g,p]=s.useState(!1),t=()=>p(!g),v=async()=>{const l=await j(a);l!=null&&l.data.ok?c(!0):c(!1)},b=async()=>{const u=await O(o,"emailVerification");u!=null&&u.data.ok&&f(!0)},P=async()=>{const u=await E(h,o,"signUpOTP");if(u!=null&&u.data.OTPValidation){t();const w=await k(o);w!=null&&w.data&&y()}},y=()=>{I.success("Successfully updated email",{position:"bottom-right",autoClose:4e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored"})};return e.jsxs(e.Fragment,{children:[e.jsx(T,{position:"bottom-right",autoClose:4e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:"colored"}),e.jsxs("div",{className:"px-5 md:px-10 lg:px-40 mt-5",children:[e.jsx("h3",{className:"font-semibold text-sm md:text-lg lg:text-xl",children:"Change E-mail"}),r?e.jsx("div",{className:"mt-5",children:e.jsxs("div",{className:"flex w-4/12",children:[e.jsx(n.Input,{value:h,onChange:l=>x(l.target.value),label:"enter your OTP"}),e.jsx(n.Button,{onClick:P,className:"ml-3",children:"Submit"})]})}):e.jsx("div",{className:"mt-5",children:d?e.jsxs("div",{className:"flex w-4/12",children:[e.jsx(n.Input,{value:o,onChange:l=>m(l.target.value),label:"enter your new E-mail"}),e.jsx(n.Button,{onClick:b,className:"ml-3 px-3 w-32 h-10",children:"Send OTP"})]}):e.jsxs("div",{className:"flex w-4/12",children:[e.jsx(n.Input,{value:a,onChange:l=>i(l.target.value),label:"enter your password"}),e.jsx(n.Button,{onClick:v,className:"ml-3",children:"Verify"})]})})]}),e.jsx(e.Fragment,{children:e.jsx(n.Dialog,{size:"sm",open:g,handler:t,children:e.jsx(n.DialogBody,{children:e.jsx(B,{handleOpen:t})})})})]})},B=({handleOpen:a})=>{const[i,d]=s.useState(5);return s.useEffect(()=>{const c=setTimeout(()=>{d(o=>o-1)},1e3);return i===0&&(localStorage.removeItem("token"),a(),window.location.reload()),()=>{clearTimeout(c)}},[i]),e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("p",{children:"You will be logged out soon, so please re-login!"}),e.jsxs("h3",{className:"font-semibold text-sm md:text-lg lg:text-xl",children:[i," Seconds"]})]})})},_=()=>{const[a,i]=s.useState(""),[d,c]=s.useState(!1),[o,m]=s.useState(""),[r,f]=s.useState(""),[h,x]=s.useState(""),g=async()=>{const t=await j(a);t!=null&&t.data.ok?(x(""),c(!0)):x("Entered password is not correct")},p=async()=>{if(o===r){const t=await S(o);t!=null&&t.data.ok&&x("")}else x("confirm password does not match with new password you entered")};return e.jsxs("div",{className:"px-5 md:px-10 lg:px-40 mt-5",children:[e.jsx("h3",{className:"font-semibold text-sm md:text-lg lg:text-xl",children:"Change password"}),e.jsxs("div",{className:"mt-5",children:[h.length>0&&e.jsx("p",{className:"text-red-500 my-2",children:h}),d?e.jsxs("div",{className:"flex flex-col items-end w-4/12",children:[e.jsx("div",{className:"my-2 w-full",children:e.jsx(n.Input,{value:o,onChange:t=>m(t.target.value),label:"enter your new password"})}),e.jsx("div",{className:"my-2 w-full",children:e.jsx(n.Input,{value:r,onChange:t=>f(t.target.value),label:"confirm your password"})}),e.jsx(n.Button,{size:"sm",onClick:p,className:"ml-3",children:"Submit"})]}):e.jsxs("div",{className:"flex w-4/12",children:[e.jsx(n.Input,{value:a,onChange:t=>i(t.target.value),label:"enter your current password"}),e.jsx(n.Button,{size:"sm",onClick:g,className:"ml-3 px-3 w-32 h-10",children:"Verify"})]})]})]})},F=s.lazy(()=>N(()=>import("./contactInfo-e2e6f017.js"),["assets/contactInfo-e2e6f017.js","assets/index-115ee365.js","assets/index-24626ca1.css","assets/index.esm-7979f4ab.js","assets/userApis-d8269ce8.js","assets/userInterceptor-ef0a808e.js","assets/envConfig-2c904499.js","assets/useDispatch-549d81b8.js"])),H=()=>{const[a,i]=s.useState("contactInfo"),[d,c]=s.useState(""),o=C();s.useEffect(()=>{const r=localStorage.getItem("token");r&&c(r),r||o("/")},[]);const m=r=>{i(r)};return e.jsx(e.Fragment,{children:d&&e.jsxs("div",{className:"w-full min-h-screen",children:[e.jsx("div",{className:"w-full  bg-blue-gray-50 px-5 md:px-10 lg:px-40",children:e.jsxs("div",{className:"flex h-10 md:h-20 w-full items-center justify-between",children:[e.jsx("h4",{onClick:()=>m("contactInfo"),className:`text-sm md:text-lg lg:text-xl md:font-bold dark:text-white hover:cursor-pointer hover:bg-blue-gray-600 rounded-md p-3 ${a==="contactInfo"&&"bg-blue-gray-500"} `,children:"Account info"}),e.jsx("h4",{onClick:()=>m("changeEmail"),className:`text-sm md:text-lg lg:text-xl md:font-bold dark:text-white hover:cursor-pointer hover:bg-blue-gray-600 rounded-md p-3 ${a==="changeEmail"&&"bg-blue-gray-500"}`,children:"Change email"}),e.jsx("h4",{onClick:()=>m("changePassword"),className:`text-sm md:text-lg lg:text-xl md:font-bold dark:text-white hover:cursor-pointer hover:bg-blue-gray-600 rounded-md p-3 ${a==="changePassword"&&"bg-blue-gray-500"}`,children:"Change password"})]})}),e.jsx("div",{children:a==="contactInfo"&&e.jsx(s.Suspense,{children:e.jsx(F,{})})}),e.jsx("div",{children:a==="changeEmail"&&e.jsx(V,{})}),e.jsx("div",{children:a==="changePassword"&&e.jsx(_,{})})]})})};export{H as default};
